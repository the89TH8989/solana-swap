Enter your prompt here

# Project Structure

â”œâ”€ ğŸ“ src
  â”œâ”€ ğŸ“ tests
    â””â”€ example.ts
  â”œâ”€ ğŸ“ lib
    â””â”€ signature.ts
    â””â”€ sender.ts
    â””â”€ jito.ts
    â””â”€ wait.ts
  â””â”€ index.ts
  â””â”€ types.ts
â”œâ”€ ğŸ“ .venv
  â”œâ”€ ğŸ“ Scripts
    â””â”€ deactivate.bat
    â””â”€ Activate.ps1
    â””â”€ activate.bat
    â””â”€ activate
  â”œâ”€ ğŸ“ Lib
    â”œâ”€ ğŸ“ site-packages
      â”œâ”€ ğŸ“ setuptools
        â”œâ”€ ğŸ“ config
          â”œâ”€ ğŸ“ _validate_pyproject
            â””â”€ __init__.py
            â””â”€ formats.py
            â””â”€ fastjsonschema_validations.py
            â””â”€ fastjsonschema_exceptions.py
            â””â”€ extra_validations.py
            â””â”€ error_reporting.py
          â””â”€ __init__.py
          â””â”€ _apply_pyprojecttoml.py
          â””â”€ setupcfg.py
          â””â”€ pyprojecttoml.py
          â””â”€ expand.py
        â”œâ”€ ğŸ“ _vendor
          â”œâ”€ ğŸ“ more_itertools
            â””â”€ more.py
            â””â”€ recipes.py
            â””â”€ __init__.py
          â”œâ”€ ğŸ“ pyparsing
            â”œâ”€ ğŸ“ diagram
              â””â”€ __init__.py
            â””â”€ util.py
            â””â”€ __init__.py
            â””â”€ unicode.py
            â””â”€ testing.py
            â””â”€ results.py
            â””â”€ helpers.py
            â””â”€ exceptions.py
            â””â”€ core.py
            â””â”€ common.py
            â””â”€ actions.py
          â”œâ”€ ğŸ“ importlib_metadata
            â””â”€ _itertools.py
            â””â”€ _meta.py
            â””â”€ __init__.py
            â””â”€ _text.py
            â””â”€ _functools.py
            â””â”€ _compat.py
            â””â”€ _collections.py
            â””â”€ _adapters.py
          â”œâ”€ ğŸ“ importlib_resources
            â””â”€ abc.py
            â””â”€ __init__.py
            â””â”€ _legacy.py
            â””â”€ _itertools.py
            â””â”€ _compat.py
            â””â”€ _common.py
            â””â”€ _adapters.py
            â””â”€ simple.py
            â””â”€ readers.py
          â”œâ”€ ğŸ“ jaraco
            â”œâ”€ ğŸ“ text
              â””â”€ __init__.py
            â””â”€ __init__.py
            â””â”€ functools.py
            â””â”€ context.py
          â”œâ”€ ğŸ“ packaging
            â””â”€ __init__.py
            â””â”€ __about__.py
            â””â”€ _structures.py
            â””â”€ _musllinux.py
            â””â”€ _manylinux.py
            â””â”€ version.py
            â””â”€ utils.py
            â””â”€ tags.py
            â””â”€ specifiers.py
            â””â”€ requirements.py
            â””â”€ markers.py
          â”œâ”€ ğŸ“ tomli
            â””â”€ __init__.py
            â””â”€ _types.py
            â””â”€ _re.py
            â””â”€ _parser.py
          â””â”€ ordered_set.py
          â””â”€ __init__.py
          â””â”€ zipp.py
          â””â”€ typing_extensions.py
        â”œâ”€ ğŸ“ extern
          â””â”€ __init__.py
        â”œâ”€ ğŸ“ command
          â””â”€ editable_wheel.py
          â””â”€ easy_install.py
          â””â”€ egg_info.py
          â””â”€ install.py
          â””â”€ install_egg_info.py
          â””â”€ install_lib.py
          â””â”€ install_scripts.py
          â””â”€ develop.py
          â””â”€ launcher manifest.xml
          â””â”€ register.py
          â””â”€ saveopts.py
          â””â”€ rotate.py
          â””â”€ py36compat.py
          â””â”€ setopt.py
          â””â”€ __init__.py
          â””â”€ upload_docs.py
          â””â”€ upload.py
          â””â”€ test.py
          â””â”€ alias.py
        â””â”€ glob.py
        â””â”€ launch.py
        â””â”€ installer.py
        â””â”€ extension.py
        â””â”€ errors.py
        â””â”€ logging.py
        â””â”€ discovery.py
        â””â”€ dep_util.py
        â””â”€ depends.py
        â””â”€ wheel.py
        â””â”€ windows_support.py
        â””â”€ version.py
        â””â”€ unicode_utils.py
        â””â”€ _deprecation_warning.py
        â””â”€ _reqs.py
        â””â”€ __init__.py
        â””â”€ _path.py
        â””â”€ _itertools.py
        â””â”€ _importlib.py
        â””â”€ _imp.py
        â””â”€ _entry_points.py
        â””â”€ sandbox.py
        â””â”€ py34compat.py
        â””â”€ package_index.py
        â””â”€ namespaces.py
        â””â”€ msvc.py
        â””â”€ monkey.py
        â””â”€ archive_util.py
      â”œâ”€ ğŸ“ pkg_resources
        â”œâ”€ ğŸ“ extern
          â””â”€ __init__.py
        â”œâ”€ ğŸ“ _vendor
          â”œâ”€ ğŸ“ pyparsing
            â”œâ”€ ğŸ“ diagram
              â””â”€ __init__.py
            â””â”€ results.py
            â””â”€ testing.py
            â””â”€ helpers.py
            â””â”€ unicode.py
            â””â”€ exceptions.py
            â””â”€ core.py
            â””â”€ util.py
            â””â”€ __init__.py
            â””â”€ common.py
            â””â”€ actions.py
          â”œâ”€ ğŸ“ more_itertools
            â””â”€ __init__.py
            â””â”€ recipes.py
            â””â”€ more.py
          â”œâ”€ ğŸ“ packaging
            â””â”€ __init__.py
            â””â”€ __about__.py
            â””â”€ _structures.py
            â””â”€ _musllinux.py
            â””â”€ _manylinux.py
            â””â”€ version.py
            â””â”€ utils.py
            â””â”€ tags.py
            â””â”€ specifiers.py
            â””â”€ requirements.py
            â””â”€ markers.py
          â”œâ”€ ğŸ“ importlib_resources
            â””â”€ __init__.py
            â””â”€ _legacy.py
            â””â”€ _itertools.py
            â””â”€ _compat.py
            â””â”€ _common.py
            â””â”€ _adapters.py
            â””â”€ simple.py
            â””â”€ readers.py
            â””â”€ abc.py
          â”œâ”€ ğŸ“ jaraco
            â”œâ”€ ğŸ“ text
              â””â”€ __init__.py
            â””â”€ __init__.py
            â””â”€ functools.py
            â””â”€ context.py
          â””â”€ __init__.py
          â””â”€ zipp.py
          â””â”€ appdirs.py
        â””â”€ __init__.py
      â”œâ”€ ğŸ“ pip
        â”œâ”€ ğŸ“ _vendor
          â”œâ”€ ğŸ“ urllib3
            â”œâ”€ ğŸ“ util
              â””â”€ __init__.py
              â””â”€ wait.py
              â””â”€ url.py
              â””â”€ timeout.py
              â””â”€ ssl_match_hostname.py
              â””â”€ ssl_.py
              â””â”€ ssltransport.py
              â””â”€ retry.py
              â””â”€ response.py
              â””â”€ request.py
              â””â”€ queue.py
              â””â”€ proxy.py
              â””â”€ connection.py
            â”œâ”€ ğŸ“ packages
              â”œâ”€ ğŸ“ backports
                â””â”€ __init__.py
                â””â”€ weakref_finalize.py
                â””â”€ makefile.py
              â””â”€ __init__.py
              â””â”€ six.py
            â”œâ”€ ğŸ“ contrib
              â”œâ”€ ğŸ“ _securetransport
                â””â”€ __init__.py
                â””â”€ low_level.py
                â””â”€ bindings.py
              â””â”€ pyopenssl.py
              â””â”€ ntlmpool.py
              â””â”€ appengine.py
              â””â”€ securetransport.py
              â””â”€ socks.py
              â””â”€ _appengine_environ.py
              â””â”€ __init__.py
            â””â”€ _version.py
            â””â”€ __init__.py
            â””â”€ _collections.py
            â””â”€ response.py
            â””â”€ request.py
            â””â”€ poolmanager.py
            â””â”€ filepost.py
            â””â”€ fields.py
            â””â”€ exceptions.py
            â””â”€ connectionpool.py
            â””â”€ connection.py
          â”œâ”€ ğŸ“ truststore
            â””â”€ py.typed
            â””â”€ _api.py
            â””â”€ _macos.py
            â””â”€ __init__.py
            â””â”€ _windows.py
            â””â”€ _ssl_constants.py
            â””â”€ _openssl.py
          â”œâ”€ ğŸ“ tomli
            â””â”€ py.typed
            â””â”€ _parser.py
            â””â”€ _types.py
            â””â”€ _re.py
            â””â”€ __init__.py
          â”œâ”€ ğŸ“ rich
            â””â”€ ansi.py
            â””â”€ bar.py
            â””â”€ align.py
            â””â”€ abc.py
            â””â”€ box.py
            â””â”€ cells.py
            â””â”€ color.py
            â””â”€ color_triplet.py
            â””â”€ columns.py
            â””â”€ console.py
            â””â”€ constrain.py
            â””â”€ containers.py
            â””â”€ control.py
            â””â”€ default_styles.py
            â””â”€ highlighter.py
            â””â”€ jupyter.py
            â””â”€ json.py
            â””â”€ file_proxy.py
            â””â”€ filesize.py
            â””â”€ emoji.py
            â””â”€ errors.py
            â””â”€ layout.py
            â””â”€ diagnose.py
            â””â”€ live.py
            â””â”€ region.py
            â””â”€ repr.py
            â””â”€ rule.py
            â””â”€ py.typed
            â””â”€ protocol.py
            â””â”€ prompt.py
            â””â”€ progress_bar.py
            â””â”€ progress.py
            â””â”€ scope.py
            â””â”€ pretty.py
            â””â”€ panel.py
            â””â”€ palette.py
            â””â”€ pager.py
            â””â”€ screen.py
            â””â”€ padding.py
            â””â”€ segment.py
            â””â”€ measure.py
            â””â”€ markup.py
            â””â”€ logging.py
            â””â”€ live_render.py
            â””â”€ spinner.py
            â””â”€ _emoji_replace.py
            â””â”€ _export_format.py
            â””â”€ _emoji_codes.py
            â””â”€ _extension.py
            â””â”€ _cell_widths.py
            â””â”€ _fileno.py
            â””â”€ _inspect.py
            â””â”€ _log_render.py
            â””â”€ tree.py
            â””â”€ traceback.py
            â””â”€ themes.py
            â””â”€ theme.py
            â””â”€ _loop.py
            â””â”€ _null_file.py
            â””â”€ text.py
            â””â”€ _palettes.py
            â””â”€ terminal_theme.py
            â””â”€ table.py
            â””â”€ syntax.py
            â””â”€ styled.py
            â””â”€ _pick.py
            â””â”€ _wrap.py
            â””â”€ __init__.py
            â””â”€ _windows_renderer.py
            â””â”€ _windows.py
            â””â”€ _win32_console.py
            â””â”€ __main__.py
            â””â”€ _timer.py
            â””â”€ _stack.py
            â””â”€ _spinners.py
            â””â”€ _ratio.py
            â””â”€ style.py
            â””â”€ status.py
          â”œâ”€ ğŸ“ resolvelib
            â”œâ”€ ğŸ“ compat
              â””â”€ collections_abc.py
              â””â”€ __init__.py
            â””â”€ __init__.py
            â””â”€ structs.py
            â””â”€ resolvers.py
            â””â”€ reporters.py
            â””â”€ py.typed
            â””â”€ providers.py
          â”œâ”€ ğŸ“ requests
            â””â”€ models.py
            â””â”€ sessions.py
            â””â”€ packages.py
            â””â”€ hooks.py
            â””â”€ help.py
            â””â”€ exceptions.py
            â””â”€ cookies.py
            â””â”€ status_codes.py
            â””â”€ compat.py
            â””â”€ certs.py
            â””â”€ structures.py
            â””â”€ utils.py
            â””â”€ _internal_utils.py
            â””â”€ auth.py
            â””â”€ __init__.py
            â””â”€ api.py
            â””â”€ __version__.py
            â””â”€ adapters.py
          â”œâ”€ ğŸ“ pyproject_hooks
            â”œâ”€ ğŸ“ _in_process
              â””â”€ __init__.py
              â””â”€ _in_process.py
            â””â”€ py.typed
            â””â”€ _impl.py
            â””â”€ __init__.py
          â”œâ”€ ğŸ“ pygments
            â”œâ”€ ğŸ“ styles
              â””â”€ _mapping.py
              â””â”€ __init__.py
            â”œâ”€ ğŸ“ lexers
              â””â”€ __init__.py
              â””â”€ _mapping.py
              â””â”€ python.py
            â”œâ”€ ğŸ“ formatters
              â””â”€ html.py
              â””â”€ irc.py
              â””â”€ img.py
              â””â”€ latex.py
              â””â”€ groff.py
              â””â”€ bbcode.py
              â””â”€ other.py
              â””â”€ pangomarkup.py
              â””â”€ rtf.py
              â””â”€ terminal.py
              â””â”€ svg.py
              â””â”€ terminal256.py
              â””â”€ __init__.py
              â””â”€ _mapping.py
            â”œâ”€ ğŸ“ filters
              â””â”€ __init__.py
            â””â”€ cmdline.py
            â””â”€ console.py
            â””â”€ __main__.py
            â””â”€ __init__.py
            â””â”€ util.py
            â””â”€ unistring.py
            â””â”€ token.py
            â””â”€ style.py
            â””â”€ sphinxext.py
            â””â”€ scanner.py
            â””â”€ regexopt.py
            â””â”€ plugin.py
            â””â”€ modeline.py
            â””â”€ lexer.py
            â””â”€ formatter.py
            â””â”€ filter.py
          â”œâ”€ ğŸ“ pkg_resources
            â””â”€ __init__.py
          â”œâ”€ ğŸ“ platformdirs
            â””â”€ __main__.py
            â””â”€ __init__.py
            â””â”€ windows.py
            â””â”€ version.py
            â””â”€ unix.py
            â””â”€ py.typed
            â””â”€ macos.py
            â””â”€ api.py
            â””â”€ android.py
          â”œâ”€ ğŸ“ packaging
            â”œâ”€ ğŸ“ licenses
              â””â”€ __init__.py
              â””â”€ _spdx.py
            â””â”€ markers.py
            â””â”€ metadata.py
            â””â”€ py.typed
            â””â”€ requirements.py
            â””â”€ specifiers.py
            â””â”€ __init__.py
            â””â”€ _tokenizer.py
            â””â”€ _structures.py
            â””â”€ _parser.py
            â””â”€ _musllinux.py
            â””â”€ _manylinux.py
            â””â”€ _elffile.py
            â””â”€ version.py
            â””â”€ utils.py
            â””â”€ tags.py
          â”œâ”€ ğŸ“ msgpack
            â””â”€ __init__.py
            â””â”€ fallback.py
            â””â”€ ext.py
            â””â”€ exceptions.py
          â”œâ”€ ğŸ“ idna
            â””â”€ intranges.py
            â””â”€ py.typed
            â””â”€ package_data.py
            â””â”€ idnadata.py
            â””â”€ core.py
            â””â”€ uts46data.py
            â””â”€ compat.py
            â””â”€ __init__.py
            â””â”€ codec.py
          â”œâ”€ ğŸ“ cachecontrol
            â”œâ”€ ğŸ“ caches
              â””â”€ file_cache.py
              â””â”€ redis_cache.py
              â””â”€ __init__.py
            â””â”€ adapter.py
            â””â”€ cache.py
            â””â”€ controller.py
            â””â”€ filewrapper.py
            â””â”€ heuristics.py
            â””â”€ py.typed
            â””â”€ serialize.py
            â””â”€ wrapper.py
            â””â”€ _cmd.py
            â””â”€ __init__.py
          â”œâ”€ ğŸ“ certifi
            â””â”€ __main__.py
            â””â”€ __init__.py
            â””â”€ py.typed
            â””â”€ core.py
            â””â”€ cacert.pem
          â””â”€ __init__.py
          â””â”€ vendor.txt
          â””â”€ typing_extensions.py
        â”œâ”€ ğŸ“ _internal
          â”œâ”€ ğŸ“ vcs
            â””â”€ versioncontrol.py
            â””â”€ __init__.py
            â””â”€ subversion.py
            â””â”€ mercurial.py
            â””â”€ git.py
            â””â”€ bazaar.py
          â”œâ”€ ğŸ“ utils
            â””â”€ entrypoints.py
            â””â”€ filetypes.py
            â””â”€ filesystem.py
            â””â”€ egg_link.py
            â””â”€ direct_url_helpers.py
            â””â”€ deprecation.py
            â””â”€ glibc.py
            â””â”€ datetime.py
            â””â”€ compatibility_tags.py
            â””â”€ compat.py
            â””â”€ appdirs.py
            â””â”€ hashes.py
            â””â”€ __init__.py
            â””â”€ _log.py
            â””â”€ _jaraco_text.py
            â””â”€ wheel.py
            â””â”€ virtualenv.py
            â””â”€ urls.py
            â””â”€ unpacking.py
            â””â”€ temp_dir.py
            â””â”€ subprocess.py
            â””â”€ retry.py
            â””â”€ packaging.py
            â””â”€ misc.py
            â””â”€ logging.py
          â”œâ”€ ğŸ“ resolution
            â”œâ”€ ğŸ“ resolvelib
              â””â”€ base.py
              â””â”€ __init__.py
              â””â”€ resolver.py
              â””â”€ requirements.py
              â””â”€ reporter.py
              â””â”€ provider.py
              â””â”€ found_candidates.py
              â””â”€ factory.py
              â””â”€ candidates.py
            â”œâ”€ ğŸ“ legacy
              â””â”€ resolver.py
              â””â”€ __init__.py
            â””â”€ __init__.py
            â””â”€ base.py
          â”œâ”€ ğŸ“ req
            â””â”€ __init__.py
            â””â”€ req_uninstall.py
            â””â”€ req_set.py
            â””â”€ req_install.py
            â””â”€ req_file.py
            â””â”€ constructors.py
          â”œâ”€ ğŸ“ operations
            â”œâ”€ ğŸ“ install
              â””â”€ __init__.py
              â””â”€ editable_legacy.py
              â””â”€ wheel.py
            â””â”€ __init__.py
            â””â”€ prepare.py
            â””â”€ freeze.py
            â””â”€ check.py
          â”œâ”€ ğŸ“ network
            â””â”€ __init__.py
            â””â”€ xmlrpc.py
            â””â”€ utils.py
            â””â”€ session.py
            â””â”€ lazy_wheel.py
            â””â”€ download.py
            â””â”€ auth.py
            â””â”€ cache.py
          â”œâ”€ ğŸ“ metadata
            â”œâ”€ ğŸ“ importlib
              â””â”€ __init__.py
              â””â”€ _envs.py
              â””â”€ _compat.py
            â””â”€ __init__.py
            â””â”€ _json.py
            â””â”€ pkg_resources.py
            â””â”€ base.py
          â”œâ”€ ğŸ“ models
            â””â”€ scheme.py
            â””â”€ link.py
            â””â”€ installation_report.py
            â””â”€ index.py
            â””â”€ format_control.py
            â””â”€ direct_url.py
            â””â”€ candidate.py
            â””â”€ __init__.py
            â””â”€ wheel.py
            â””â”€ selection_prefs.py
            â””â”€ search_scope.py
          â”œâ”€ ğŸ“ locations
            â””â”€ __init__.py
            â””â”€ _sysconfig.py
            â””â”€ base.py
          â”œâ”€ ğŸ“ index
            â””â”€ collector.py
            â””â”€ __init__.py
            â””â”€ sources.py
            â””â”€ package_finder.py
          â”œâ”€ ğŸ“ commands
            â””â”€ debug.py
            â””â”€ freeze.py
            â””â”€ download.py
            â””â”€ hash.py
            â””â”€ help.py
            â””â”€ index.py
            â””â”€ configuration.py
            â””â”€ completion.py
            â””â”€ check.py
            â””â”€ inspect.py
            â””â”€ cache.py
            â””â”€ list.py
            â””â”€ install.py
            â””â”€ __init__.py
            â””â”€ wheel.py
            â””â”€ uninstall.py
            â””â”€ show.py
            â””â”€ search.py
          â”œâ”€ ğŸ“ cli
            â””â”€ main_parser.py
            â””â”€ progress_bars.py
            â””â”€ req_command.py
            â””â”€ parser.py
            â””â”€ main.py
            â””â”€ spinners.py
            â””â”€ index_command.py
            â””â”€ command_context.py
            â””â”€ status_codes.py
            â””â”€ cmdoptions.py
            â””â”€ __init__.py
            â””â”€ base_command.py
            â””â”€ autocompletion.py
          â””â”€ __init__.py
          â””â”€ self_outdated_check.py
          â””â”€ pyproject.py
          â””â”€ main.py
          â””â”€ exceptions.py
          â””â”€ configuration.py
          â””â”€ cache.py
        â””â”€ py.typed
        â””â”€ __pip-runner__.py
        â””â”€ __main__.py
        â””â”€ __init__.py
  â””â”€ pyvenv.cfg
â””â”€ package.cjs.json
â””â”€ tsconfig.json
â””â”€ README.md
â””â”€ package.json
â””â”€ package.esm.json
â””â”€ package-lock.json
â””â”€ LICENSE.txt


# Project Files

- c:\Users\nngro\OneDrive\Documenten\GitHub\solana-swap\dist\esm\package.json
- c:\Users\nngro\AppData\Roaming\Code\User\cs-script.user\integration-error.md
- c:\Users\nngro\OneDrive\Documenten\GitHub\solana-swap\.gitignore
- c:\Users\nngro\OneDrive\Documenten\GitHub\solana-swap\dist\esm\index.js

## c:\Users\nngro\OneDrive\Documenten\GitHub\solana-swap\dist\esm\package.json
```
{
    "type": "module",
    "main": "./index.js"
  }
```

## c:\Users\nngro\AppData\Roaming\Code\User\cs-script.user\integration-error.md
```
# CS-Script VSCode extension integration error

If you are seeing this error it means that the extension cannot find CS-Script tools. 
# CS-Script VSCode extension integration

The extension requires CS-Script tools to function properly.
This is the most reliable way of managing their updates independently from the extension releases (e.g. update with new .NET version).

## Installation

1. Install/Update tools
    - Script engine: `dotnet tool install --global cs-script.cli`
    - Syntaxer: `dotnet tool install --global cs-syntaxer`

2. Configure tools
    Execute extension command "CS-Script: Detect and integrate CS-Script"

Note: you need to have .NET SDK installed for using CS-Script (see https://dotnet.microsoft.com/en-us/download)

```

## c:\Users\nngro\OneDrive\Documenten\GitHub\solana-swap\.gitignore
```
node_modules
```

## c:\Users\nngro\OneDrive\Documenten\GitHub\solana-swap\dist\esm\index.js
```
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
import axios from "axios";
import bs58 from "bs58";
import { Connection, Transaction, VersionedTransaction, } from "@solana/web3.js";
import { transactionSenderAndConfirmationWaiter } from "./lib/sender.js";
import { sendBundle, createTipTransaction, checkBundleStatus } from "./lib/jito.js";
export class SolanaTracker {
    constructor(keypair, rpc, apiKey) {
        this.baseUrl = "https://swap-v2.solanatracker.io";
        this.connection = new Connection(rpc);
        this.keypair = keypair;
        this.apiKey = apiKey || "";
    }
    setBaseUrl(url) {
        return __awaiter(this, void 0, void 0, function* () {
            this.baseUrl = url;
        });
    }
    getRate(from, to, amount, slippage) {
        return __awaiter(this, void 0, void 0, function* () {
            const params = new URLSearchParams({
                from,
                to,
                amount: amount.toString(),
                slippage: slippage.toString(),
            });
            const url = `${this.baseUrl}/rate?${params}`;
            try {
                const response = yield axios.get(url);
                return response.data;
            }
            catch (error) {
                throw error;
            }
        });
    }
    getSwapInstructions(from, to, fromAmount, slippage, payer, priorityFee, forceLegacy) {
        return __awaiter(this, void 0, void 0, function* () {
            const params = new URLSearchParams({
                from,
                to,
                fromAmount: fromAmount.toString(),
                slippage: slippage.toString(),
                payer,
                forceLegacy: forceLegacy ? "true" : "false",
            });
            if (priorityFee) {
                params.append("priorityFee", priorityFee.toString());
            }
            const url = `${this.baseUrl}/swap?${params}`;
            try {
                const response = yield axios.get(url, {
                    headers: {
                        "x-api-key": this.apiKey,
                    },
                });
                return response.data;
            }
            catch (error) {
                throw error;
            }
        });
    }
    performSwap(swapResponse, options = {
        sendOptions: { skipPreflight: true },
        confirmationRetries: 30,
        confirmationRetryTimeout: 1000,
        lastValidBlockHeightBuffer: 150,
        commitment: "processed",
        resendInterval: 1000,
        confirmationCheckInterval: 1000,
        skipConfirmationCheck: false,
        jito: {
            enabled: false,
            tip: 0
        }
    }) {
        return __awaiter(this, void 0, void 0, function* () {
            let serializedTransactionBuffer;
            try {
                // Attempt to decode the transaction from base64
                serializedTransactionBuffer = Buffer.from(swapResponse.txn, "base64");
            }
            catch (error) {
                console.error("Error decoding transaction from base64:", error);
                throw new Error("Failed to decode transaction from base64.  Please check the transaction data.");
            }
            let txn;
            const blockhash = yield this.connection.getLatestBlockhash();
            const blockhashWithExpiryBlockHeight = {
                blockhash: blockhash.blockhash,
                lastValidBlockHeight: blockhash.lastValidBlockHeight,
            };
            // Deserialize and sign the transaction based on its version
            try {
                if (swapResponse.txVersion === 'v0') {
                    txn = VersionedTransaction.deserialize(serializedTransactionBuffer);
                }
                else {
                    txn = Transaction.from(serializedTransactionBuffer);
                }
                txn.sign([this.keypair]);
            }
            catch (error) {
                console.error("Error deserializing or signing transaction:", error);
                throw new Error("Failed to deserialize or sign transaction.  Check transaction version and keypair.");
            }
            // Handle Jito integration if enabled
            if (options.jito === null || options.jito === void 0 ? void 0 : options.jito.enabled) {
                try {
                    // Create a tip transaction for the Jito block engine
                    const tipTxn = yield createTipTransaction(this.keypair.publicKey.toBase58(), options.jito.tip);
                    tipTxn.recentBlockhash = blockhash.blockhash;
                    tipTxn.sign(this.keypair);
                    // Send the bundle of transactions
                    const response = yield sendBundle([bs58.encode(txn.serialize()), bs58.encode(tipTxn.serialize())]);
                    if (response.result) {
                        const txid = yield checkBundleStatus(response.result, options.confirmationRetries, options.commitment, options.confirmationCheckInterval);
                        return txid;
                    }
                    else {
                        console.error("Jito bundle submission failed:", response);
                        throw new Error("Jito bundle submission failed.  Check the response for details.");
                    }
                }
                catch (error) {
                    console.error("Error during Jito integration:", error);
                    throw new Error(`Error during Jito integration: ${error.message}`);
                }
            }
            // Send the transaction and wait for confirmation
            try {
                const txid = yield transactionSenderAndConfirmationWaiter({
                    connection: this.connection,
                    serializedTransaction: txn.serialize(),
                    blockhashWithExpiryBlockHeight,
                    options: options,
                });
                return txid.toString();
            }
            catch (error) {
                console.error("Transaction sending or confirmation failed:", error);
                throw new Error(`Transaction sending or confirmation failed: ${error.message}`);
            }
        });
    }
}

```

